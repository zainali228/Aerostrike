#!/bin/bash

echo "Starting Aero Strike (AI-Powered Wifi Penetration Testing Tool)..."
echo "IMPORTANT: This tool requires real wireless hardware with monitor mode support"
echo "and must be run with root privileges on Kali Linux."
echo

# Check for root privileges in real environment
# Skip this check in development environment
if [[ -z "$REPL_ID" ]] && [ "$EUID" -ne 0 ]; then
  echo "Error: This tool must be run as root. Please use sudo."
  echo "Usage: sudo ./run_wifi_pentest.sh"
  exit 1
else
  # We're in Replit - announce development mode
  if [[ ! -z "$REPL_ID" ]]; then
    echo "RUNNING IN REPLIT DEVELOPMENT ENVIRONMENT"
    echo "This is a limited functionality mode for development only."
    echo "No real penetration testing will be performed."
  fi
fi

# Create necessary directories
mkdir -p data
mkdir -p templates
mkdir -p temp

# Run the tool
echo "Launching GUI..."
if [[ ! -z "$REPL_ID" ]]; then
  # In Replit environment, show warning but continue for development
  echo "WARNING: Running in development environment without wireless hardware."
  echo "This is a LIMITED FUNCTIONALITY mode for development purposes only."
  echo "In a real environment, physical wireless adapters are required."
  echo
  python main.py
else
  # In real environment, run with Python 3
  python3 main.py
fi

# Exit with the same status as the Python script
exit_code=$?
if [ $exit_code -ne 0 ]; then
  echo "ERROR: The application exited with code $exit_code"
  echo "For real-world usage, please run this tool on Kali Linux with"
  echo "compatible wireless hardware that supports monitor mode."
fi
exit $exit_code
